<html>

<head>
<title>Results bound comparison</title>
<link rel="icon" href="http://www.omg.org/favicon.ico?" type="image/x-icon" />
<link rel="shortcut icon" href="http://www.omg.org/favicon.ico?" type="image/x-icon" />
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<script src="//code.jquery.com/jquery-1.10.2.min.js" type="application/javascript"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src="lib/purl/purl.js" type="application/javascript"></script>
</head>
<style>
body {
    margin: 30px 30px;
}
#title {
    text-align:center;
}
#comparaison {
    position: relative;
}

img {
    border: 1px solid #333333;
}

#overlay {
    position:absolute;
    top: 0px;
    left: 0px;
    border: 1px solid #aaaaaa;
}



</style>

<body>
    <div id="title">
        <h1></h1>
        <p><span class='glyphicon glyphicon-move'></span> Drag the stencil using the mouse drag/drop or the keyboard arrows.</p>
        <p><span class='glyphicon glyphicon-zoom-in'></span> Zoom in/out using the Page Up/Page Down buttons (<input type="text" id="scale" size=3 value="1.0"/></span>)</p>
    </div>
    <div id="comparaison">
        <img id="base"></img>
        <img id="overlay"></img>
    </div>

</body>
<script>
    $('#title h1').html($.url().param('title'));
    
    //Set the image src in the DOM
    var $overlay = $('#overlay');
    $('#base').attr('src', $.url().param('base'));
    $overlay.attr('src', $.url().param('overlay')).draggable({ cursor: "move"});
        
    
    //Add keyboard binding
    $('body').keydown(function(e) {
        //Nudging
        if (e.keyCode >= 37 && e.keyCode <=40) {
            e.preventDefault();
            var offset = $overlay.offset();
            switch(e.keyCode){
                case 37:
                    offset.left = offset.left -1;
                    break;
                case 38:
                    offset.top = offset.top - 1;
                    break;
                case 39:
                    offset.left = offset.left + 1;
                    break;
                case 40:
                    offset.top = offset.top +1;
                    break;                
                    
            }
            $overlay.offset(offset);
        }
        //Zooming
        if(e.keyCode == 33 || e.keyCode ==34) {
            var scale = parseFloat($('#scale').val());            
            if(e.keyCode == 33) {
                scale = scale + 0.1;
            } else {
                scale = scale - 0.1;
            }
            scale = scale.toFixed(2);
            $overlay.css('transform', 'scale(' + scale + ')');
            $('#scale').val(scale);
        }
        

    });
    
    //Scale keyboard entry
    $('#scale').change(function(){
        $overlay.css('transform', 'scale(' + parseFloat($('#scale').val()) + ')');
    });
    
</script>



</html>
